<div th:fragment="main-content" xmlns:th="http://www.w3.org/1999/xhtml">
    <div th:switch="${view}">

        <!-- OVERVIEW -->
        <div th:case="'overview'">
            <h2>Mano bendrija</h2>
            <div class="cards">
                <div class="card">
                    <h3>Bendrija</h3>
                    <div class="number" th:text="${community != null ? community.name : 'Nepriskirta'}">-</div>
                </div>
                <div class="card">
                    <h3>Paslaugų</h3>
                    <div class="number" th:text="${feesCount}">0</div>
                </div>
                <div class="card">
                    <h3>Kainų</h3>
                    <div class="number" th:text="${pricesCount}">0</div>
                </div>
            </div>
        </div>

        <!-- PAYMENTS -->
        <div th:case="'payments'">
            <h2>Bendrijos paslaugos ir kainos</h2>
            <table>
                <thead>
                <tr>
                    <th>Paslauga</th>
                    <th>Matavimo vnt.</th>
                    <th>Kaina (€)</th>
                    <th>Galioja nuo</th>
                    <th>Galioja iki</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="p : ${prices}">
                    <td th:text="${p.fee.name}">---</td>
                    <td th:text="${p.fee.unit}">---</td>
                    <td th:text="${#numbers.formatDecimal(p.amount, 1, 2)}">0.00</td>
                    <td th:text="${#temporals.format(p.validFrom, 'yyyy-MM-dd')}">---</td>
                    <td th:text="${p.validTo != null ? #temporals.format(p.validTo, 'yyyy-MM-dd') : '-'}">-</td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- PROFILE -->
        <div th:case="'profile'">
            <h2>Mano profilis</h2>

            <div class="profile-container">
                <form id="profileForm" th:attr="data-user-id=${user.id}">

                    <div class="profile-row">
                        <label>Vardas</label>
                        <input name="name" type="text" th:value="${user.name}" required>
                    </div>

                    <div class="profile-row">
                        <label>El. paštas</label>
                        <input name="email" type="email" th:value="${user.email}" required>
                    </div>

                    <div class="profile-row">
                        <label>Naujas slaptažodis</label>
                        <input name="password" type="password" placeholder="Palikite tuščią, jei nekeičiate">
                    </div>

                    <div class="profile-row readonly-field">
                        <label>Bendrija:</label>
                        <span th:text="${community != null ? community.name : 'Nepriskirta'}"></span>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="save-btn">Išsaugoti</button>
                    </div>
                </form>

                <div id="profileMessage" class="profile-message"></div>
            </div>
        </div>

        <!-- NOTIFICATIONS -->
        <div th:case="'notifications'">
            <h2>Pranešimai</h2>
            <p style="color:#555; margin-bottom: 15px;">
                Čia bus rodomi jūsų bendrijos pranešimai — administratoriaus ar valdytojo paskelbti įrašai apie
                mokesčius, susirinkimus, planuojamus darbus ir svarbius įvykius.
            </p>

            <div class="notifications-list">
                <div class="notification-item example">
                    <h3>Pavyzdinis pranešimas</h3>
                    <p><strong>Tipas:</strong> Administracinis</p>
                    <p><strong>Data:</strong> 2025-10-20</p>
                    <p>
                        „Informuojame, kad nuo lapkričio 1 d. keičiasi atliekų tvarkymo paslaugos tiekėjas.
                        Daugiau informacijos – artimiausiame susirinkime.“
                    </p>
                </div>

                <div class="notification-item example">
                    <h3>Techninis pranešimas</h3>
                    <p><strong>Data:</strong> 2025-10-25</p>
                    <p>
                        Dėl planuojamų vandens sistemos priežiūros darbų 2025-10-25 nuo 8:00 iki 12:00 val.
                        bus laikinai nutrauktas vandens tiekimas.
                    </p>
                </div>

                <div class="notification-item example">
                    <h3>Mokesčių priminimas</h3>
                    <p><strong>Data:</strong> 2025-10-31</p>
                    <p>
                        Primename, kad iki mėnesio pabaigos reikia apmokėti mokesčius už šildymą ir šiukšlių išvežimą.
                    </p>
                </div>
            </div>
        </div>

    </div>
</div>
